<% layout('./layout/page.ejs') -%>

<div class="container">
  <div class="row justify-content-center">
    <div class="col-md-8 col-lg-6">
      <div class="auth-card bg-white rounded shadow p-4">
        <div class="text-center mb-4">
          <i class="bi bi-person-circle text-primary display-4"></i>
          <h1 class="h3 mt-3">Регистрация и вход</h1>
          <p class="text-muted">
            Введите имя пользователя и пароль. Если такого пользователя нет, он будет создан.
          </p>
        </div>

        <form class="form-horizontal" action="/logreg" method="post">
          <div class="form-group mb-4">
            <label class="control-label mb-2">
              <i class="bi bi-person me-2"></i>Имя пользователя
            </label>
            <div class="input-group">
              <span class="input-group-text">
                <i class="bi bi-at"></i>
              </span>
              <input class="form-control" type="text"
                     placeholder="Введите ваше имя" 
                     name="username"
                     required>
            </div>
            <small class="form-text text-muted mt-1">
              Минимум 3 символа
            </small>
          </div>

          <div class="form-group mb-4">
            <label class="control-label mb-2">
              <i class="bi bi-key me-2"></i>Пароль
            </label>
            <div class="input-group">
              <span class="input-group-text">
                <i class="bi bi-lock"></i>
              </span>
              <input class="form-control" type="password"
                     placeholder="Введите пароль" 
                     name="password"
                     required>
            </div>
            <small class="form-text text-muted mt-1">
              Минимум 6 символов
            </small>
          </div>

          <div class="form-group text-center">
            <input class="btn btn-primary btn-lg px-5" type="submit"
                   value="Войти / Зарегистрироваться">
          </div>

          <% if(error) { %>
            <div class="alert alert-danger mt-4 border-0">
              <div class="d-flex align-items-center">
                <i class="bi bi-exclamation-triangle-fill me-3"></i>
                <div><%= error %></div>
              </div>
            </div>
          <% } %>
        </form>

        <div class="text-center mt-4 pt-3 border-top">
          <p class="text-muted mb-0">
            <i class="bi bi-info-circle me-1"></i>
            После успешной авторизации вы будете перенаправлены на главную страницу.
          </p>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.auth-card {
  border-top: 4px solid var(--primary-color);
}

.input-group-text {
  background: var(--gradient-primary);
  color: white;
  border: none;
}

.form-horizontal {
  background: transparent;
  box-shadow: none;
  padding: 0;
}
</style>